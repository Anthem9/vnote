# BugkuCTF_writeup(三)

## web篇

### 域名解析

![Snipaste_2018-03-12_16-51-15](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_16-51-15.png)

修改hosts文件吧

> **hosts文件**（域名解析文件[[1\]](https://zh.wikipedia.org/wiki/Hosts%E6%96%87%E4%BB%B6#cite_note-1)）是一个用于储存[计算机网络](https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C)中各节点信息的计算机文件。这个文件负责将[主机名称](https://zh.wikipedia.org/wiki/%E4%B8%BB%E6%A9%9F%E5%90%8D%E7%A8%B1)映射到相应的[IP地址](https://zh.wikipedia.org/wiki/IP%E5%9C%B0%E5%9D%80)。hosts文件通常用于补充或取代网络中[DNS](https://zh.wikipedia.org/wiki/DNS)的功能。和DNS不同的是，计算机的用户可以直接对hosts文件进行控制。

Windows路径为`%SystemRoot%\System32\drivers\etc\hosts`

![Snipaste_2018-03-12_17-01-14](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-01-14.png)

改完别忘了删掉前面的注释符号

访问flag.bugku.com

![Snipaste_2018-03-12_17-01-14](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-01-14.png)

这里记个坑，第一次访问时出现了500的服务器错误，关掉SS代理后恢复正常了。

![Snipaste_2018-03-12_17-04-28](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-04-28.png)

### 你必须让他停下

![Snipaste_2018-03-12_17-12-19](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-12-19.png)

打开题目

![Snipaste_2018-03-12_17-12-54](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-12-54.png)

页面不停刷新，时不时出现图片，并且告诉我们抓到图片就能得到flag

####思路一

那我们上Burp了，方便起见先把题目网址加到Scope里

![Snipaste_2018-03-12_17-16-09](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-16-09.png)

然后多抓几个包，分析

![Snipaste_2018-03-12_17-22-39](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-22-39.png)

其中一些包404了，它们要访问的图片不存在，然后还有一些大小是749和750HTML页面，再往下看

![Snipaste_2018-03-12_17-23-02](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-23-02.png)

发现有大小为766的HTML页面，明显比其他的大，想必是返回了正确图片的页面了

![Snipaste_2018-03-12_17-26-11](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-26-11.png)

果然。

#### 思路二

发到repeater然后疯狂发送，其中有一个会响应flag

![Snipaste_2018-03-12_17-18-53](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_17-18-53.png)

#### 小结

思路一是通法但比较麻烦，思路二比较快但比较依赖题目。

### 文件包含

![Snipaste_2018-03-12_19-39-31](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_19-39-31.png)

打开题目

![Snipaste_2018-03-12_19-52-11](E:\我的文档\公众号\截图临时文件夹\Snipaste_2018-03-12_19-52-11.png)